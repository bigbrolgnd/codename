# ==============================================================================
# Environment Configuration - codename (WaaS Factory)
# ==============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control
# ==============================================================================

# ------------------------------------------------------------------------------
# APPLICATION
# ------------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
API_PORT=4000

# ------------------------------------------------------------------------------
# DATABASE (Supabase / PostgreSQL)
# ------------------------------------------------------------------------------
# Primary persistence layer (Architecture: Supabase)
DATABASE_URL=postgresql://user:password@localhost:5432/codename
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ------------------------------------------------------------------------------
# VISION AI SERVICE (Required for Story 1-3)
# ------------------------------------------------------------------------------
# Choose ONE provider for image extraction:

# Option 1: OpenAI GPT-4 Vision
OPENAI_API_KEY=sk-your-openai-key-here
OPENAI_MODEL=gpt-4-vision-preview

# Option 2: Anthropic Claude 3 Vision
ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here
ANTHROPIC_MODEL=claude-3-opus-20240229

# Option 3: Google Gemini Vision
GOOGLE_AI_API_KEY=your-google-ai-key-here
GOOGLE_AI_MODEL=gemini-pro-vision

# Option 4: GLM Vision (Zhipu AI) - For AI Builder Agent
GLM_API_KEY=your-glm-api-key-here
GLM_MODEL=glm-4v-plus
GLM_API_BASE=https://open.bigmodel.cn/api/paas/v4/

# ------------------------------------------------------------------------------
# ORCHESTRATION (n8n)
# ------------------------------------------------------------------------------
# Required for Story 1-6b (Container Provisioning), 6-12 (Theme Publishing)
# Required for Story 2-1 (Booking Confirmations)
N8N_WEBHOOK_URL=https://your-n8n-instance.com/webhook
N8N_BOOKING_WEBHOOK_URL=https://your-n8n-instance.com/webhook/booking-confirmation
N8N_API_KEY=your-n8n-api-key-here
N8N_WEBHOOK_SECRET=your-webhook-signing-secret

# ------------------------------------------------------------------------------
# AI BUILDER AGENT (NEW - 2026-01-12)
# ------------------------------------------------------------------------------
# Local Builder Agent (Llama-4-Scout via vLLM/Ollama)
LOCAL_LLM_BASE_URL=http://localhost:11434
LOCAL_LLM_MODEL=llama-4-scout:17b-q4
LOCAL_LLM_TIMEOUT=120000

# Agent API Configuration
AGENT_API_BASE_PATH=/api/v1/agent
AGENT_MAX_TOKEN_CAP=200000
AGENT_RATE_LIMIT=10

# Template System
TEMPLATE_COUNT=20
TEMPLATE_CACHE_TTL=3600

# Feature Flags
FEATURE_GLM_VISION_ENABLED=false
FEATURE_LOCAL_BUILDER_ENABLED=false
FEATURE_TEMPLATE_DISCOVERY_QUIZ_ENABLED=false

# ------------------------------------------------------------------------------
# INFRASTRUCTURE PROVIDERS
# ------------------------------------------------------------------------------
# Replit API (Story 1-6b: Container Lifecycle Management)
REPLIT_API_KEY=your-replit-api-key-here
REPLIT_TEAM_ID=your-team-id-here
REPLIT_TEMPLATE_ID=your-template-repl-id

# Cloudflare (DNS and Edge Routing)
CLOUDFLARE_API_TOKEN=your-cloudflare-api-token
CLOUDFLARE_ZONE_ID=your-zone-id-here
CLOUDFLARE_ACCOUNT_ID=your-account-id-here

# ------------------------------------------------------------------------------
# PAYMENTS (Stripe)
# ------------------------------------------------------------------------------
# Story 2-4: Stripe Payment Integration
# Story 6-11: Add-on Subscription Gate
STRIPE_SECRET_KEY=sk_test_your-stripe-secret-key
STRIPE_PUBLISHABLE_KEY=pk_test_your-publishable-key
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-secret
STRIPE_DESIGN_STUDIO_PRICE_ID=price_your-addon-price-id
STRIPE_PRO_TIER_PRICE_ID=price_your-pro-tier-id

# ------------------------------------------------------------------------------
# NOTIFICATIONS
# ------------------------------------------------------------------------------
# Story 2-5: Notification Dispatcher
TWILIO_ACCOUNT_SID=ACyour-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WHATSAPP_NUMBER=whatsapp:+1234567890

# ------------------------------------------------------------------------------
# MARKETING AUTOMATION
# ------------------------------------------------------------------------------
# Story 5-1, 5-2: Review Ingestion & AI Auto-Reply
GOOGLE_BUSINESS_API_KEY=your-google-business-api-key
GOOGLE_BUSINESS_LOCATION_ID=your-location-id

# Story 5-3, 5-4: Social Auto-Pilot & Instagram Sync
INSTAGRAM_CLIENT_ID=your-instagram-client-id
INSTAGRAM_CLIENT_SECRET=your-instagram-client-secret
FACEBOOK_ACCESS_TOKEN=your-facebook-access-token
FACEBOOK_PAGE_ID=your-page-id

# ------------------------------------------------------------------------------
# ANALYTICS & TRACKING
# ------------------------------------------------------------------------------
# Story 4-2, 4-4: Data Aggregation & Visitor Charts
GOOGLE_ANALYTICS_TRACKING_ID=G-XXXXXXXXXX
META_PIXEL_ID=your-meta-pixel-id

# ------------------------------------------------------------------------------
# AUTHENTICATION (WebAuthn/Passkeys)
# ------------------------------------------------------------------------------
# Architecture requirement: Passkeys primary auth + zk-SNARK fallback
WEBAUTHN_RP_NAME="codename WaaS Factory"
WEBAUTHN_RP_ID=localhost  # Use your-domain.com in production
WEBAUTHN_ORIGIN=http://localhost:3000  # https://your-domain.com in production

# zk-SNARK Configuration (Sensitive Operations)
ZKSNARK_PROVING_KEY_PATH=./keys/proving_key.json
ZKSNARK_VERIFICATION_KEY_PATH=./keys/verification_key.json

# ------------------------------------------------------------------------------
# SECURITY
# ------------------------------------------------------------------------------
# JWT Secrets (Generate using: openssl rand -base64 32)
JWT_SECRET=your-super-secret-jwt-key-at-least-32-chars
JWT_EXPIRATION=7d

# Session Secret (for fallback sessions if needed)
SESSION_SECRET=your-session-secret-here

# CORS Allowed Origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://your-production-domain.com

# ------------------------------------------------------------------------------
# FEATURE FLAGS
# ------------------------------------------------------------------------------
# Enable/disable features during development
FEATURE_VISION_AI_ENABLED=true
FEATURE_DESIGN_STUDIO_ENABLED=true
FEATURE_INSTAGRAM_SYNC_ENABLED=false
FEATURE_COST_CAP_ENFORCEMENT=true

# ------------------------------------------------------------------------------
# DEVELOPMENT & DEBUGGING
# ------------------------------------------------------------------------------
# Logging level (error, warn, info, debug, trace)
LOG_LEVEL=debug

# Enable Zustand DevTools in browser
VITE_ENABLE_REDUX_DEVTOOLS=true

# Disable SSL verification for local development (NEVER in production)
NODE_TLS_REJECT_UNAUTHORIZED=1  # Set to 0 only for local dev if needed

# ==============================================================================
# END OF CONFIGURATION
# ==============================================================================
# Remember to:
# 1. Copy this file to .env
# 2. Fill in real values (remove placeholder text)
# 3. NEVER commit .env to git
# 4. Add .env to .gitignore
# ==============================================================================
